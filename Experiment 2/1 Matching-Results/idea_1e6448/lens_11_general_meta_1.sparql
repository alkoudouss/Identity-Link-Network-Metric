INSERT

{
	<http://risis.eu/lens/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552> a <http://vocabularies.bridgedb.org/ops#Lens> ;
		<http://risis.eu/alignment/predicate/operator> <http://risis.eu/lens/operator/union> ;
		<http://rdfs.org/ns/void#target> <http://risis.eu/linkset/refined_eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866_exactStrSim_Country_Code_N730070400> .
	
	<http://risis.eu/linkset/refined_eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866_exactStrSim_Country_Code_N730070400> a <http://rdfs.org/ns/void#Linkset> ;
		<http://www.w3.org/2000/01/rdf-schema#label> "refined_eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866_exactStrSim_Country_Code_N730070400" ;
		<http://www.w3.org/2000/01/rdf-schema#comment> "Linking <http://risis.eu/dataset/eter_2014> to <http://risis.eu/dataset/grid_20170712> by aligning <http://risis.eu/eter_2014/ontology/predicate/Country_Code> with \"<http://www.grid.ac/ontology/hasAddress>/<http://www.grid.ac/ontology/countryCode>\" using the mechanism: exactStrSim" ;
		<http://rdfs.org/ns/void#triples> 390 ;
		<http://risis.eu/alignment/predicate/sameAsCount> 13 ;
		<http://risis.eu/alignment/predicate/alignsMechanism> <http://risis.eu/mechanism/exactStrSim> ;
		<http://rdfs.org/ns/void#subjectsTarget> <http://risis.eu/dataset/eter_2014> ;
		<http://rdfs.org/ns/void#objectsTarget> <http://risis.eu/dataset/grid_20170712> ;
		<http://rdfs.org/ns/void#linkPredicate> <http://risis.eu/alignment/predicate/exactStrSim13> ;
		<http://vocabularies.bridgedb.org/ops#subjectsDatatype> <http://risis.eu/eter_2014/ontology/class/University> ;
		<http://vocabularies.bridgedb.org/ops#objectsDatatype> <http://xmlns.com/foaf/0.1/Organization> ;
		<http://risis.eu/alignment/predicate/singletonGraph> <http://risis.eu/singletons/refined_eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866_exactStrSim_Country_Code_N730070400> ;
		<http://vocabularies.bridgedb.org/ops#assertionMethod> <http://risis.eu/method/refined_eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866_exactStrSim_Country_Code_N730070400> ;
		<http://vocabularies.bridgedb.org/ops#linksetJustification> <http://risis.eu/justification/refined_eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866_exactStrSim_Country_Code_N730070400> ;
		<http://risis.eu/alignment/predicate/alignsSubjects> <http://risis.eu/eter_2014/ontology/predicate/Country_Code> ;
		<http://risis.eu/alignment/predicate/alignsObjects> ?LINK_1 ;
		<http://www.w3.org/ns/prov#wasDerivedFrom> <http://risis.eu/linkset/eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866> ;
		<http://risis.eu/alignment/predicate/subjectsExtended> <http://risis.eu/dataset/eter_2014> ;
		<http://risis.eu/alignment/predicate/objectsExtended> <http://risis.eu/dataset/grid_20170712> .
	
	<http://risis.eu/lens/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552> <http://rdfs.org/ns/void#target> <http://risis.eu/linkset/refined_orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711_exactStrSim_locationOf_Country_of_location_N830927792> .
	
	<http://risis.eu/linkset/refined_orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711_exactStrSim_locationOf_Country_of_location_N830927792> a <http://rdfs.org/ns/void#Linkset> ;
		<http://www.w3.org/2000/01/rdf-schema#label> "refined_orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711_exactStrSim_locationOf_Country_of_location_N830927792" ;
		<http://www.w3.org/2000/01/rdf-schema#comment> "Linking <http://risis.eu/dataset/orgreg_20170718> to <http://risis.eu/dataset/eter_2014> by aligning \"<http://risis.eu/orgreg_20170718/ontology/predicate/locationOf>/<http://risis.eu/orgreg_20170718/ontology/predicate/Country_of_location>\" with <http://risis.eu/eter_2014/ontology/predicate/Country_Code> using the mechanism: exactStrSim" ;
		<http://rdfs.org/ns/void#triples> 3415 ;
		<http://risis.eu/alignment/predicate/sameAsCount> 14 ;
		<http://risis.eu/alignment/predicate/alignsMechanism> <http://risis.eu/mechanism/exactStrSim> ;
		<http://rdfs.org/ns/void#subjectsTarget> <http://risis.eu/dataset/orgreg_20170718> ;
		<http://rdfs.org/ns/void#objectsTarget> <http://risis.eu/dataset/eter_2014> ;
		<http://rdfs.org/ns/void#linkPredicate> <http://risis.eu/alignment/predicate/exactStrSim14> ;
		<http://vocabularies.bridgedb.org/ops#subjectsDatatype> <http://risis.eu/orgreg_20170718/ontology/class/University> ;
		<http://vocabularies.bridgedb.org/ops#objectsDatatype> <http://risis.eu/eter_2014/ontology/class/University> ;
		<http://risis.eu/alignment/predicate/singletonGraph> <http://risis.eu/singletons/refined_orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711_exactStrSim_locationOf_Country_of_location_N830927792> ;
		<http://vocabularies.bridgedb.org/ops#assertionMethod> <http://risis.eu/method/refined_orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711_exactStrSim_locationOf_Country_of_location_N830927792> ;
		<http://vocabularies.bridgedb.org/ops#linksetJustification> <http://risis.eu/justification/refined_orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711_exactStrSim_locationOf_Country_of_location_N830927792> ;
		<http://risis.eu/alignment/predicate/alignsSubjects> ?LINK_0 ;
		<http://risis.eu/alignment/predicate/alignsObjects> <http://risis.eu/eter_2014/ontology/predicate/Country_Code> ;
		<http://www.w3.org/ns/prov#wasDerivedFrom> <http://risis.eu/linkset/orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711> ;
		<http://risis.eu/alignment/predicate/subjectsExtended> <http://risis.eu/dataset/orgreg_20170718> ;
		<http://risis.eu/alignment/predicate/objectsExtended> <http://risis.eu/dataset/eter_2014> .
	
	<http://risis.eu/lens/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552> <http://rdfs.org/ns/void#target> <http://risis.eu/linkset/refined_orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638_exactStrSim_locationOf_Country_of_location_N1684200062> .
	
	<http://risis.eu/linkset/refined_orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638_exactStrSim_locationOf_Country_of_location_N1684200062> a <http://rdfs.org/ns/void#Linkset> ;
		<http://www.w3.org/2000/01/rdf-schema#label> "refined_orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638_exactStrSim_locationOf_Country_of_location_N1684200062" ;
		<http://www.w3.org/2000/01/rdf-schema#comment> "Linking <http://risis.eu/dataset/orgreg_20170718> to <http://risis.eu/dataset/grid_20170712> by aligning \"<http://risis.eu/orgreg_20170718/ontology/predicate/locationOf>/<http://risis.eu/orgreg_20170718/ontology/predicate/Country_of_location>\" with \"<http://www.grid.ac/ontology/hasAddress>/<http://www.grid.ac/ontology/countryCode>\" using the mechanism: exactStrSim" ;
		<http://rdfs.org/ns/void#triples> 415 ;
		<http://risis.eu/alignment/predicate/sameAsCount> 15 ;
		<http://risis.eu/alignment/predicate/alignsMechanism> <http://risis.eu/mechanism/exactStrSim> ;
		<http://rdfs.org/ns/void#subjectsTarget> <http://risis.eu/dataset/orgreg_20170718> ;
		<http://rdfs.org/ns/void#objectsTarget> <http://risis.eu/dataset/grid_20170712> ;
		<http://rdfs.org/ns/void#linkPredicate> <http://risis.eu/alignment/predicate/exactStrSim15> ;
		<http://vocabularies.bridgedb.org/ops#subjectsDatatype> <http://risis.eu/orgreg_20170718/ontology/class/University> ;
		<http://vocabularies.bridgedb.org/ops#objectsDatatype> <http://xmlns.com/foaf/0.1/Organization> ;
		<http://risis.eu/alignment/predicate/singletonGraph> <http://risis.eu/singletons/refined_orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638_exactStrSim_locationOf_Country_of_location_N1684200062> ;
		<http://vocabularies.bridgedb.org/ops#assertionMethod> <http://risis.eu/method/refined_orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638_exactStrSim_locationOf_Country_of_location_N1684200062> ;
		<http://vocabularies.bridgedb.org/ops#linksetJustification> <http://risis.eu/justification/refined_orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638_exactStrSim_locationOf_Country_of_location_N1684200062> ;
		<http://risis.eu/alignment/predicate/alignsSubjects> ?LINK_0 ;
		<http://risis.eu/alignment/predicate/alignsObjects> ?LINK_1 ;
		<http://www.w3.org/ns/prov#wasDerivedFrom> <http://risis.eu/linkset/orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638> ;
		<http://risis.eu/alignment/predicate/subjectsExtended> <http://risis.eu/dataset/orgreg_20170718> ;
		<http://risis.eu/alignment/predicate/objectsExtended> <http://risis.eu/dataset/grid_20170712> .
	
	<http://risis.eu/lens/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552> <http://risis.eu/alignment/predicate/singletonGraph> <http://risis.eu/singletons/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552> ;
		<http://www.w3.org/2000/01/rdf-schema#label> "union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552" ;
		<http://vocabularies.bridgedb.org/ops#assertionMethod> <http://risis.eu/method/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552> .
	
	<http://risis.eu/method/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552> <http://risis.eu/alignment/predicate/sparql> """DROP SILENT GRAPH <http://risis.eu/alignment/temp-match/load00> ;

    ###### MOVE THIS LINKSET TO A NEW UNION LINKSET GRAPH
    INSERT
    {
        GRAPH <http://risis.eu/alignment/temp-match/load00>
        {
            ?subject ?predicate	?object .
        }
    }
    WHERE
    {
        GRAPH <http://risis.eu/linkset/refined_eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866_exactStrSim_Country_Code_N730070400>
        {
            ?subject ?predicate	?object .
        }
    } ; 

    ###### MOVE THE SINGLETON METADATA GRAPH TO A NEW UNION SINGLETON GRAPH
    PREFIX ll:<http://risis.eu/alignment/predicate/>
    INSERT
    {
        GRAPH <http://risis.eu/alignment/temp-match/load00>
        {
            ?subject        ?predicate	                ?object .
            ?validation     ?vPred                      ?vObj .
            ?rQuestion      ll:created                  ?validation .
        }
    }
    WHERE
    {
        GRAPH <http://risis.eu/singletons/refined_eter_2014_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_N1822375866_exactStrSim_Country_Code_N730070400>
        {
            ?subject ?predicate	?object .
            OPTIONAL
            {
               ?subject		    ll:hasValidation 			?validation .
               ?validation      ?vPred                      ?vObj .
               ?rQuestion       ll:created                  ?validation .
            }
        }
    } ;

    ###### MOVE THIS LINKSET TO A NEW UNION LINKSET GRAPH
    INSERT
    {
        GRAPH <http://risis.eu/alignment/temp-match/load00>
        {
            ?subject ?predicate	?object .
        }
    }
    WHERE
    {
        GRAPH <http://risis.eu/linkset/refined_orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711_exactStrSim_locationOf_Country_of_location_N830927792>
        {
            ?subject ?predicate	?object .
        }
    } ; 

    ###### MOVE THE SINGLETON METADATA GRAPH TO A NEW UNION SINGLETON GRAPH
    PREFIX ll:<http://risis.eu/alignment/predicate/>
    INSERT
    {
        GRAPH <http://risis.eu/alignment/temp-match/load00>
        {
            ?subject        ?predicate	                ?object .
            ?validation     ?vPred                      ?vObj .
            ?rQuestion      ll:created                  ?validation .
        }
    }
    WHERE
    {
        GRAPH <http://risis.eu/singletons/refined_orgreg_20170718_eter_2014_nearbyGeoSim50Meter_University_LatitudeLongitude_P471520711_exactStrSim_locationOf_Country_of_location_N830927792>
        {
            ?subject ?predicate	?object .
            OPTIONAL
            {
               ?subject		    ll:hasValidation 			?validation .
               ?validation      ?vPred                      ?vObj .
               ?rQuestion       ll:created                  ?validation .
            }
        }
    } ;

    ###### MOVE THIS LINKSET TO A NEW UNION LINKSET GRAPH
    INSERT
    {
        GRAPH <http://risis.eu/alignment/temp-match/load00>
        {
            ?subject ?predicate	?object .
        }
    }
    WHERE
    {
        GRAPH <http://risis.eu/linkset/refined_orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638_exactStrSim_locationOf_Country_of_location_N1684200062>
        {
            ?subject ?predicate	?object .
        }
    } ; 

    ###### MOVE THE SINGLETON METADATA GRAPH TO A NEW UNION SINGLETON GRAPH
    PREFIX ll:<http://risis.eu/alignment/predicate/>
    INSERT
    {
        GRAPH <http://risis.eu/alignment/temp-match/load00>
        {
            ?subject        ?predicate	                ?object .
            ?validation     ?vPred                      ?vObj .
            ?rQuestion      ll:created                  ?validation .
        }
    }
    WHERE
    {
        GRAPH <http://risis.eu/singletons/refined_orgreg_20170718_grid_20170712_nearbyGeoSim50Meter_University_LatitudeLongitude_P1068652638_exactStrSim_locationOf_Country_of_location_N1684200062>
        {
            ?subject ?predicate	?object .
            OPTIONAL
            {
               ?subject		    ll:hasValidation 			?validation .
               ?validation      ?vPred                      ?vObj .
               ?rQuestion       ll:created                  ?validation .
            }
        }
    } ;

    PREFIX prov:<http://www.w3.org/ns/prov#>
    PREFIX specific:<http://risis.eu/singletons/>
    PREFIX tmpgraph:<http://risis.eu/alignment/temp-match/>
    PREFIX tmpvocab:<http://risis.eu//temp-match/temp-match/predicate/>
    PREFIX ll:<http://risis.eu/alignment/predicate/>

    DROP SILENT GRAPH tmpgraph:load01 ;
    DROP SILENT GRAPH tmpgraph:load02 ;

    ###### CREATING THE INTERSECTION CORRESPONDENCES WITH A TEMPORARY PREDICATE
    ###### REMOVE DUPLICATES IN THE SAME DIRECTION
    INSERT
    {
      GRAPH tmpgraph:load01
      {
        ?sCorr 		tmpvocab:predicate		?oCorr  .
      }
    }
    WHERE
    {
      graph <http://risis.eu/alignment/temp-match/load00>
      {
        ?sCorr		?singCorr 				?oCorr  .
        FILTER NOT EXISTS { ?x ?sCorr ?z }
        #?singCorr	?singCorrPr 			?singCorrobj .
      }
    } ;

    ###### UPDATE tmpgraph:load01 WITH UNIQUE PREDICATES
    INSERT
    {
      GRAPH tmpgraph:load02
      {
        ?sCorr ?singPre ?oCorr .
      }
    }
    WHERE
    {
      GRAPH tmpgraph:load01
      {
        ?sCorr ?y ?oCorr .

        ### Create A SINGLETON URI\"
        BIND( replace(\"http://risis.eu/alignment/predicate/union_#\", \"#\", STRAFTER(str(UUID()),\"uuid:\")) as ?pre )
        BIND(iri(?pre) as ?singPre)
      }
    } ;

    INSERT
    {
        ### union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552
        GRAPH <http://risis.eu/lens/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552>
        {
            ?sCorr			?singPre 					?oCorr .
        }

        GRAPH specific:union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552
        {
            ?singPre		prov:wasDerivedFrom 	    ?singCorr .
            ?singCorr		?singCorrPr 				?singCorrobj .
            ?validation     ?vPred                      ?vObj .
            ?rQuestion      ll:created                  ?validation .
        }
    }
    WHERE
    {
        GRAPH tmpgraph:load02
        {
            ?sCorr			?singPre 					?oCorr .
        }

        graph <http://risis.eu/alignment/temp-match/load00>
        {
            ?sCorr			?singCorr 				    ?oCorr  .
            # THE DIRECT SINGLETONS
            OPTIONAL { ?singCorr			?singCorrPr 			?singCorrobj .  }
            # THE VALIDATIONS
            OPTIONAL
            {
               ?singCorr		ll:hasValidation 			?validation .
               ?validation      ?vPred                      ?vObj .
               ?rQuestion       ll:created                  ?validation .
            }
            FILTER NOT EXISTS { ?x ?sCorr ?z }
        }
    } ;

    DROP SILENT GRAPH tmpgraph:load00 ;
    DROP SILENT GRAPH tmpgraph:load01 ;
    DROP SILENT GRAPH tmpgraph:load02
    """ .
	
	<http://risis.eu/lens/union_Eter_2014_Grid_20170712_Orgreg_20170718_N1732508552> <http://rdfs.org/ns/void#triples> 4209 ;
		<http://risis.eu/alignment/predicate/removedDuplicates> 4220 ;
		<http://risis.eu/alignment/predicate/expectedCorrespondences> 4220 .
}
WHERE {
	### BINDING THIS BECAUSE STARDOG MESSES UP THE RESULT WHEN USING PROPERTY PATH
	BIND( IRI("<http://risis.eu/orgreg_20170718/ontology/predicate/locationOf>/<http://risis.eu/orgreg_20170718/ontology/predicate/Country_of_location>") AS ?LINK_0 )
	BIND( IRI("<http://www.grid.ac/ontology/hasAddress>/<http://www.grid.ac/ontology/countryCode>") AS ?LINK_1 )
}